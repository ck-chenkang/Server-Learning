# EMQX数据桥接

一个MQTT客户端转发到EMQX然后，EMQX转发到另外一个MQTT服务器。

## 1.部署EMQX

[Docker部署方式](https://www.emqx.io/docs/zh/v5.0/deploy/install-docker.html#%E9%80%9A%E8%BF%87-docker-%E8%BF%90%E8%A1%8C%E5%8D%95%E4%B8%AA-emqx-%E8%8A%82%E7%82%B9)

```
#下载镜像
docker pull emqx/emqx:5.0.26

#运行
docker run --restart=always -d --name emqx -p 1883:1883 -p 8083:8083 -p 8084:8084 -p 8883:8883 -p 18083:18083 emqx/emqx:5.0.26
```

## 2.登录

登录默认的端口号为18083，账号为admin，密码为public，第一次登录后需要重新设置密码

## 3.准备另外一个MQTT服务器

这里选用mosquito，具体可以百度

## 4.在EMQX配置MQTT账号信息

![截图_20230606205037](Imag/截图_20230606205037.png)

![截图_20230606205053](Imag/截图_20230606205053.png)

这里都是admin/admin

## 5.用MQTTX测试连接

![截图_20230606205136](Imag/截图_20230606205136.png)

![截图_20230606205151](Imag/截图_20230606205151.png)

## 6.测试Mosquitto连接

![截图_20230606205219](Imag/截图_20230606205219.png)

## 7.配置数据桥接

![截图_20230606205253](Imag/截图_20230606205253.png)

![截图_20230606205305](Imag/截图_20230606205305.png)

![截图_20230606205418](Imag/截图_20230606205418.png)

![截图_20230606205505](Imag/截图_20230606205505.png)

![截图_20230606205536](Imag/截图_20230606205536.png)

连续点两次创建

## 8.测试



![截图_20230606205718](Imag/截图_20230606205718.png)

![截图_20230606205732](Imag/截图_20230606205732.png)


## 9.测试转发到IOT平台

创建设备，凭据为test

![截图_20230606211021](Imag/截图_20230606211021.png)

Mqtt端口号为1884

![截图_20230606211101](Imag/截图_20230606211101.png)

配置转发

![截图_20230606211126](Imag/截图_20230606211126.png)

![截图_20230606211135](Imag/截图_20230606211135.png)

转发

![截图_20230606211203](Imag/截图_20230606211203.png)

![截图_20230606211242](Imag/截图_20230606211242.png)