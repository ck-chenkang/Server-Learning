# 主机访问不了虚拟机docker安装的数据库

[原文链接](https://blog.csdn.net/zhaowei5210/article/details/123245609)

背景： 从别人那拿过来的一个虚拟机，虚拟机里有docker->mysql 3306。 ![](E:\codes\Server-Learning\DataBase\postgresql\Imag\2e1fa38bbf0a4be6baf44d33995738a4.png) 本机vm打开虚拟机后，自动[启动mysql](https://so.csdn.net/so/search?q=%E5%90%AF%E5%8A%A8mysql&spm=1001.2101.3001.7020)，查看容器运行一切正常： docker ps -a ![](E:\codes\Server-Learning\DataBase\postgresql\Imag\58763dd2097b4e1eaf91485ec1d41e8c.png) 所有映射的端口，在外部都telnet不通，比如 3306、6379等都不行。想着在别人都ok的，在我这里不行，问题肯定出在我的虚拟机或者我的windows（跟他比，只有vm后者win不一样，给的包应该是一样的）。那就开始百度，找了好久，大概都是这种： 1、检查防火墙（我已经关闭了，还是不行） 2、[mysql版本](https://so.csdn.net/so/search?q=mysql%E7%89%88%E6%9C%AC&spm=1001.2101.3001.7020)过高8.0，user用户密码加密方式改变。（将加密方式由 caching\_sha2\_password-> mysql\_native\_password，这个我本身就是mysql\_native\_password了，肯定也不行的） 大部分是上面两种，但我的不是，在这个帖子： [docker 端口映射 及外部无法访问问题 - 鸭子船长 - 博客园 (cnblogs.com)![](E:\codes\Server-Learning\DataBase\postgresql\Imag\icon-default.png)https://www.cnblogs.com/zl1991/p/10531726.html](https://www.cnblogs.com/zl1991/p/10531726.html "docker 端口映射 及外部无法访问问题 - 鸭子船长 - 博客园 (cnblogs.com)") 发现了可能的原因进行排查，看到第二种情况，ip转发，我就尝试看看，打开ip转发，我丢，果真好了。打开ip转发： [linux centos7开启IP转发、路由转发解决docker 端口映射 及外部无法访问问题\_学亮编程手记-CSDN博客![](https://csdnimg.cn/release/blog_editor_html/release2.0.7/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=M1L8)https://blog.csdn.net/a772304419/article/details/121697939](https://blog.csdn.net/a772304419/article/details/121697939 "linux centos7开启IP转发、路由转发解决docker 端口映射 及外部无法访问问题_学亮编程手记-CSDN博客") ```cobol vi /etc/sysctl.conf 加入此行：net.ipv4.ip_forward = 1 重新加载一下：sysctl -p 查看一下有没有修改成功：sysctl -a|grep "ip_forward" net.ipv4.ip_forward = 1....  ``` 然后在win上 telnet centos的ip 加 3306 端口，哦了，通了。

